#门诊药房


##处方审核

	dhcpha/dhcpha.outpha.outmonitor.csp   //页面
	dhcpha.outpha.outmonitor.save.csp     //查询后台cls
	pharmacy/outpha/dhcpha.outpha.outmonitor.js

1、未审核处方

	pharmacy/outpha/dhcpha.outpha.outmonitor.js中的InitGridPresc方法中
	w ##class(web.DHCSTCNTSOUTMONITOR).GetAdmPrescList("1","50","2018-07-27 - 2018-07-27^84^^true^通过","jqGrid")

2、药品详细列表

	pharmacy/outpha/dhcpha.outpha.outmonitor.js中的InitGirdPrescDetail方法中
	w ##class(web.DHCSTCNTSOUTMONITOR).GetOrdDetailData("O16091200003",1,999,"false","jqGrid")

3、点击审核通过

	pharmacy/outpha/dhcpha.outpha.outmonitor.js中的PassPresc方法中
	w ##class(web.DHCSTCNTSOUTMONITOR).SaveOPAuditResult("","Y^578^^^^34^1934||3^OA") 


##配药

	dhcpha/dhcpha.outpha.py.csp
	DHCST.OUTPHA.ACTION.csp   //查询后台cls
	pharmacy/outpha/dhcpha.outpha.py.js

1、配药列表

	pharmacy/outpha/dhcpha.outpha.py.js中的InitGridPY方法中
	w ##class(web.DHCOUTPHA.Disp).jsQueryPYList("1","50","2018-05-01^2018-05-15^11^20^^^50^^^on^^^","jqGrid")
	d ##Class(%ResultSet).RunQuery("web.DHCOutPhTQDisp","QueryLocPatPY","64769","64783","11","20","","","50","","","1","","","")

2、药品明细列表

	pharmacy/outpha/dhcpha.outpha.py.js中的InitGirdPYDetail方法中
	w ##class(web.DHCOutPhDisp).jsQueryDispListDetail(1,30,"")
	w ##class(%ResultSet).RunQuery("web.DHCOutPhDisp","QueryLocOutPatItm","22","378218","O181108000002","30")
	
3、点击配药

	pharmacy/outpha/dhcpha.outpha.py.js中的ExecutePY方法中
	w ##class(web.DHCOutPhTQDisp).InsertPHDisp("")
	

##发药

	dhcpha/dhcpha.outpha.fy.csp   
	DHCST.OUTPHA.ACTION.csp
	pharmacy/outpha/dhcpha.outpha.fy.js


1、待发药列表

	pharmacy/outpha/dhcpha.outpha.fy.js中的InitGirdWAITFY方法中
	w ##class(web.DHCOUTPHA.Disp).jsQueryNeedFYList(1,30,"2^3^1")


2、发药列表

	pharmacy/outpha/dhcpha.outpha.fy.js中的InitGridFY方法中
	w ##class(web.DHCOUTPHA.Disp).jsQueryFYList(1,30,"2016-05-01^2016-05-03^2^3^0000000222^^^^^")
	w ##class(%ResultSet).RunQuery("web.DHCOutPhTQDisp","QueryLocPatFY","")


3、药品详细列表

	pharmacy/outpha/dhcpha.outpha.fy.js中的InitGirdFYDetail方法中
	w ##class(web.DHCOutPhDisp).jsQueryDispListDetail(1,30,"")
	w ##class(%ResultSet).RunQuery("web.DHCOutPhDisp","QueryLocOutPatItm","22","378218","378218","O181108000002","30")


4、点击开始发药

	pharmacy/outpha/dhcpha.outpha.fy.js中的ExecuteSend方法中
	w ##Class(web.DHCSTInterfacePH2).StartDisp()