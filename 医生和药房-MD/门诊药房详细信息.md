#门诊药房详细信息

##处方审核
###如何判断处方是否审核？
1、从表数据中查找(Y表示同意通过，N表示拒绝)

	SELECT PHAOM_Result, * FROM DHC_PHAORDMONITOR

2、从global中查找

	zw ^DHCPHORDM(11552)

###点击通过审核或拒绝会操作那些表？

	1、在DHC_PHAORDMONITOR(处方审核/门诊拒绝发药主表)中新增一条记录。  
	2、在DHC_PHAORDMONITORLIST(处方审核/门诊拒绝发药子表)中新增一条记录



##配药
###如何判断是否配药？
1、从表数据中查找(1表示已配，0表示未配)

	SELECT PHD_PYFLAG, * FROM DHC_PHDISPEN

2、从global中查找

	zw $p(^DHCPHDISP(PHD_ROWID,1),"^",6)

3、点击配药会操作那些表？

	1、在dhc_phdispen(门诊配/发药主表)中新增一条记录
	2、在DHC_PHDISITEM(门诊配/发药子表)中新增一条记录



##发药
###如何判断是否发药？
1、从表数据中查找(1表示发药，0表示未发)

	//门诊配/发药主表
	SELECT PHD_FYFLAG, * FROM DHC_PHDISPEN

	//门诊计费药房中间表(PHA_FINFLAG发药标志)
	SELECT PHA_FINFLAG, * FROM DHC_PHARWIN WHERE PHA_ROWID='47'

2、从global中查找

	zw $p(^DHCPHDISP(PHD_ROWID),"^",4)
	zw $p(^DHCPHARW({PHA_ROWID}),"^",4)

3、点击确认发药会操作那些表？

	1、在DHC_PHDISPEN(门诊配/发药主表)中把字段PHD_FYFLAG中的0改为1
	2、在DHC_PHDISITEM(门诊配/发药子表)和DHC_PHDISITMCLB(门诊配/发药孙表)中有几条医嘱新增几条记录




##退药
###如何判断是否退药？
1、从表数据中查找(1表示已退)

	SELECT PHReq_RetFlag, * FROM DHC_PHREQUEST

2、从global中查找

	zw $p(^DHCPHREQ(4),"^",11)

3、点击确认退药会操作那些表？

	1、在DHC_PHREQUEST(门诊退药申请主表)中把字段PHReq_RetFlag中的null改为1
	2、在DHC_PHREQITEM(门诊退药申请子表)中有几条需要退药的医嘱就新增几条记录
	3、在DHC_PHRETURN(门诊退药记录主表)中有几条需要退药的医嘱就新增几条记录
	4、在DHC_PHRETITM(门诊退药记录子表)中有几条需要退药的医嘱就新增几条记录